/*
 * 手工川主题文章样式 - 自适应版本
 * 根据手机亮暗模式自动切换主题
 * 白天：亮色阅读模式，保持品牌红色强调
 * 晚上：深色极致模式，舒适护眼
 */

/* 亮色模式变量 */
:root {
    --primary-red: #E31937;
    /* 主题色变量 - 如果未定义则使用 primary-red */
    --primary-color: var(--primary-red);
    --text-primary: #222222;
    --text-secondary: #444444;
    /* --text-secondary: inherit; */
    --text-tertiary: #666666;
    /* --text-tertiary: inherit; */
    --background-primary: #ffffff;
    --background-secondary: #f8f9fa;
    --border-color: #e5e7eb;
    --code-bg: #f3f4f6;
    --mark-bg: rgba(227, 25, 55, 0.1);
    --blockquote-border: var(--primary-color, #E31937);
    --link-color: var(--primary-color, #E31937);
    --strong-color: var(--primary-color, #E31937);
  }
  
  /* 深色模式变量 */
  @media (prefers-color-scheme: dark) {
    :root {
      --primary-red: #E31937;
      /* 主题色变量不变 */
      --text-primary: #ffffff;
      /* --text-secondary: #d1d5db; */
      --text-secondary: inherit;
      /* --text-tertiary:  #a0a0a0; */
      --text-tertiary:  inherit;
      --background-primary: #000000;
      --background-secondary: #1a1a1a;
      --border-color: #404040;
      --code-bg: rgba(255, 255, 255, 0.05);
      --mark-bg: rgba(227, 25, 55, 0.2);
      --blockquote-border: var(--primary-color, #E31937);
      --link-color: var(--primary-color, #E31937);
      --strong-color: #ffffff;
    }
  }
  
  /* 基础容器样式 */
  .note-to-mp {
    font-family: AvenirNext-Regular, -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;
    font-size: 16px;
    color: var(--text-secondary);
    background-color: var(--background-primary);
    line-height: 1.6em;
    -webkit-text-size-adjust: 100%;
    margin: 0px 0px;
    padding: 1em 1em;
    transition: all 0.3s ease;
  }
  
  /* 基础元素样式 */
  .note-to-mp * {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }
  
  .note-to-mp > *:first-child {
    margin-top: 0 !important;
  }
  
  .note-to-mp > *:last-child {
    margin-top: 0 !important;
  }
  
  /* 段落和块元素间距 */
  .note-to-mp p,
  .note-to-mp pre,
  .note-to-mp dl,
  .note-to-mp form,
  .note-to-mp details,
  .note-to-mp blockquote,
  .note-to-mp table,
  .note-to-mp xmp,
  .note-to-mp plaintext,
  .note-to-mp listing,
  .note-to-mp figure {
    margin: 0.75em 0 0.45em;
  }
  
  .note-to-mp hr {
    margin: 0.75em auto;
    height: 1px;
    border: 0;
    background-color: var(--border-color);
    border-style: inset;
    border-width: 1px;
    transition: background-color 0.3s ease;
  }
  
  /* 标题样式 */
  .note-to-mp h1,
  .note-to-mp h2,
  .note-to-mp h3,
  .note-to-mp h4,
  .note-to-mp h5,
  .note-to-mp h6 {
    margin-top: 1em;
    margin-bottom: 0.5em;
    font-weight: 600;
    line-height: 1.5em;
    color: var(--primary-color, var(--primary-red));
    transition: color 0.3s ease;
  }
  
  .note-to-mp h1 {
    font-size: 1.5em;
  }
  
  .note-to-mp h2 {
    font-size: 1.3em;
    position: relative;
    padding-top: 2.5em;
    margin-top: 1em;
    counter-increment: h2counter;
  }
  
  /* 添加自动编号 - 使用伪元素创建超大序号 */
  .note-to-mp h2::before {
    content: counter(h2counter, decimal-leading-zero);
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    text-align: center;
    font-size: 2.5em;
    font-weight: 700;
    line-height: 1;
    color: var(--primary-color, var(--primary-red));
    opacity: 0.2;
    pointer-events: none;
  }
  
  .note-to-mp h3 {
    font-size: 1.1em;
  }
  
  .note-to-mp h4,
  .note-to-mp h5,
  .note-to-mp h6 {
    font-size: 1em;
  }
  
  /* 段落样式 */
  .note-to-mp p {
    margin-left: 0;
    margin-right: 0;
  }
  
  /* 引用块样式 */
  .note-to-mp blockquote {
    display: block;
    padding-left: 0.8em;
    border-left: 0.2em solid var(--blockquote-border);
    color: var(--text-secondary);
    transition: border-color 0.3s ease, color 0.3s ease;
  }
  
  .note-to-mp blockquote > :first-child {
    margin-top: 0;
  }
  
  .note-to-mp blockquote > :last-child {
    margin-bottom: 0;
  }
  
  /* 列表样式 */
  .note-to-mp ul {
    padding-left: 1.0em !important;
  }

  .note-to-mp ol {
    padding-left: 1.0em !important;
    list-style-type: decimal;
  }
  
  .note-to-mp li::marker {
    color: var(--primary-color, var(--primary-red));
    transition: color 0.3s ease;
  }
  
  .note-to-mp li {
    margin: 0;
    /* margin-left: 1em !important; */
  }
  
  /* 链接样式 */
  .note-to-mp a {
    color: var(--link-color);
    text-decoration: none;
    transition: color 0.3s ease;
  }
  
  .note-to-mp a:hover, 
  .note-to-mp a:focus, 
  .note-to-mp a:active {
    text-decoration: underline;
  }
  
  /* 文本样式 */
  .note-to-mp b,
  .note-to-mp strong {
    font-weight: bold;
    color: var(--strong-color);
    transition: color 0.3s ease;
  }
  
  .note-to-mp i,
  .note-to-mp cite,
  .note-to-mp em,
  .note-to-mp var,
  .note-to-mp address,
  .note-to-mp dfn {
    font-style: italic;
  }
  
  .note-to-mp del,
  .note-to-mp s {
    color: var(--text-tertiary);
    transition: color 0.3s ease;
  }
  
  /* 代码样式 */
  .note-to-mp pre,
  .note-to-mp xmp,
  .note-to-mp plaintext,
  .note-to-mp listing,
  .note-to-mp code,
  .note-to-mp kbd,
  .note-to-mp tt,
  .note-to-mp samp {
    font-family: Menlo-Regular, Menlo, Monaco, Consolas, "Courier New", monospace;
  }
  
  .note-to-mp code {
    display: inline;
    color: var(--text-primary);
    background-color: var(--code-bg);
    padding: 0.2em 0.4em;
    border-radius: 4px;
    transition: all 0.3s ease;
  }
  
  .note-to-mp .code-section {
    display: flex;
    border: solid 1px var(--border-color);
    background-color: var(--code-bg);
    border-radius: 8px;
    margin: 1em 0;
    transition: all 0.3s ease;
  }
  
  .note-to-mp .code-section pre {
    margin: 0;
    overflow-x: auto;
  }
  
  .note-to-mp .code-section code {
    display: block;
    padding: 0.9em;
    font-size: 0.9em;
    line-height: 1.6em;
    text-wrap: nowrap;
    background-color: transparent;
  }
  
  /* 高亮样式 */
  .note-to-mp mark {
    color: var(--text-primary);
    display: inline;
    padding: 0.2em 0.5em;
    background-color: var(--mark-bg);
    border-radius: 4px;
    transition: all 0.3s ease;
  }
  
  /* 表格样式 */
  .note-to-mp table {
    color: var(--text-secondary);
    border-collapse: collapse;
    background-color: var(--background-secondary);
    border-spacing: 2px;
    font-size: 1em;
    border: 1px solid var(--border-color);
    border-spacing: 0;
    margin: 1em 0;
    transition: all 0.3s ease;
  }
  
  .note-to-mp th,
  .note-to-mp td {
    padding: 0.7em 1em;
    font-size: 0.9em;
    border: 1px solid var(--border-color);
    transition: border-color 0.3s ease;
  }
  
  .note-to-mp th {
    background-color: var(--mark-bg);
    color: var(--text-primary);
    font-weight: bold;
  }
  
  /* 下划线样式 */
  .note-to-mp u {
    text-decoration: none;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0) 50%, var(--primary-red) 50%);
    background-repeat: repeat-x;
    background-size: 2px 2px;
    background-position: 0 1em;
  }
  
  /* 特定于手工川主题的扩展样式 */
  .note-to-mp .highlight {
    color: var(--primary-red);
    transition: color 0.3s ease;
  }
  
  .note-to-mp .important {
    border-left: 3px solid var(--primary-red);
    padding-left: 1em;
    margin: 1em 0;
    transition: border-color 0.3s ease;
  }
  
  .note-to-mp .note {
    background-color: var(--mark-bg);
    border: 1px solid var(--primary-red);
    border-radius: 8px;
    padding: 1em;
    margin: 1em 0;
    transition: all 0.3s ease;
  }
  
  .note-to-mp .tip {
    border-left: 4px solid var(--primary-red);
    padding-left: 16px;
    margin: 1em 0;
    background-color: var(--mark-bg);
    transition: all 0.3s ease;
  }
  
  /* 确保头尾卡片始终保持黑色主题 */
  .header-card,
  .footer-card {
    background-color: #000000 !important;
    color: #d1d5db !important;
  }
  
  .header-card h1,
  .header-card h2,
  .footer-card p,
  .footer-card strong {
    color: #E31937 !important;
  }